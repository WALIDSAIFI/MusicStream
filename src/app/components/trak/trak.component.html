<!-- Liste des pistes -->
<div class="bg-gray-50 min-h-screen py-4">
  <div class="max-w-full mx-auto px-4">
    <!-- En-tête avec filtres -->
    <div class="mb-4 flex flex-wrap items-center justify-between gap-2">
      <h1 class="text-xl font-bold text-gray-900">Ma Bibliothèque</h1>
      <div class="flex flex-wrap gap-1">
        <button *ngFor="let category of categories"
                (click)="onCategoryChange(category)"
                [class.bg-blue-600]="selectedCategory === category"
                class="px-2 py-1 text-sm font-medium rounded transition-all
                       hover:bg-blue-600 hover:text-white
                       {{ selectedCategory === category ? 'bg-blue-600 text-white' : 'bg-white text-gray-700 border border-gray-200' }}">
          {{ category }}
        </button>
        <button (click)="onCategoryChange('')"
                class="px-2 py-1 text-sm font-medium rounded bg-gray-700 text-white hover:bg-gray-800">
          Tout
        </button>
      </div>
    </div>

    <!-- État de chargement -->
    <div *ngIf="isLoading" class="flex justify-center items-center py-4">
      <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"></div>
    </div>

    <!-- Message d'erreur -->
    <div *ngIf="error" class="mb-2 bg-red-50 p-2 rounded text-sm text-red-600">
      {{ error }}
    </div>

    <!-- Liste des pistes -->
    <div *ngIf="!isLoading" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">
      <!-- Message si aucune piste -->
      <div *ngIf="filteredTracks.length === 0" class="col-span-full text-center py-4">
        <p class="text-gray-500 text-sm">
          {{ selectedCategory ? 'Aucune piste dans cette catégorie' : 'Aucune piste dans votre bibliothèque' }}
        </p>
      </div>

      <!-- Cartes avec lecteur -->
      <div *ngFor="let track of filteredTracks" 
           class="group relative bg-white rounded shadow-sm hover:shadow-md transition-all">
        <!-- Image avec overlay -->
        <div class="relative aspect-square">
          <img [src]="track.imageUrl || 'assets/default-album.png'"
               [alt]="track.title"
               class="w-full h-full object-cover rounded-t">
          
          <!-- Overlay avec contrôle de lecture -->
          <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 
                      transition-opacity flex items-center justify-center">
            <button (click)="playTrack(track)"
                    class="p-4 rounded-full bg-white/90 hover:bg-white 
                           transform hover:scale-110 transition-all">
              <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Infos minimalistes -->
        <div class="p-3">
          <a [routerLink]="['/tracks', track.id]" class="block hover:text-blue-600">
            <h3 class="text-base font-medium truncate">{{ track.title }}</h3>
          </a>
          <p class="text-sm text-gray-500 truncate mt-1">{{ track.artist }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
